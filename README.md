# setup

```bash
# for fish 
# bashの場合は (pwd)を$(pwd)にする
$ docker run -v (pwd)/programs:/home/programs -it --name linux_structure_ubuntu ubuntu:16.04 bin/bash
# 次回からは以下のコマンドで実行する
$ docker start -ai linux_structure_ubuntu
```

# 学習記録

## ch01

### 用語集
- アプリケーション
  - ユーザーに直接役に立つソフト
- ミドルウェア
  - アプリの共通した処理をくくりだしたもの (ex: DBシステム)
- OS
  - ハードウェアを直接操作して、アプリやミドルウェアの実行に必須な昨日を提供する(ex: Linux)

### 学んだこと
- Linuxの重要な役割
  - 外部デバイス(マウスなど)の操作
    - linuxがないとデバイスを操作するコードを作成する必要がある。
    - Linuxではデバイスドライバというプログラムにまとめて、デバイスを利用する際にはそのプログラムを介してアクセス
    - 種類が同じデバイスは同じインターフェイス(共通処理をまとめたり)で操作
    - Linuxではプロセスからデバイスに直接アクセス出来ない
      - 悪意のあるプログラマの排除

  - カーネル
    - OSの核となる処理をまとめたプログラム
    - CPUをカーネルモードの場合、重要な処理を実行出来る
      - プロセス管理
      - メモリ管理
    - カーネルにある処理を使いたければ、システムコールというものを実行する

## ch02

### 学んだこと
- sarコマンド
  - インストールし、実行出来るようにするのに設定が必要
    https://sioyaki.com/entry/2017/10/22/095500

- システムコール
  - CPUの特殊な命令を実行→CPUはカーネルモードで実行される

### 用語集
- システムコール
  - カーネルに処理を依頼する手段(プロセス生成・削除、メモリ確保・開放など)

## ch03

### 学んだこと
- プロセス生成の目的
  - 同じプログラム処理を複数のプロセスにわけて処理
  - 別のプログラムを生成

- readelfのinstall
  - binutils(バイナリファイルの操作を行うプログラム集)を指定する

### 用語集
- レジスタ
  - CPU内部にあるメモリ、小容量だが、高速
- ELF
  - Executable and Linking Format
  - バイナリ形式のファイル


## ch04

### 用語集
- 論理CPU
- スループット
  - 単位時間あたりの総仕事量
  - 完了したプロセス / 経過時間
- レイテンシ
  - それぞれの処理の開始から終了までの経過時間
  - 処理終了時刻 - 処理開始時刻

## ch05

### 学んだこと
- カーネルがプロセスにメモリを割り当てるのは大きくわけて2つ
  - プロセス生成時
  - プロセス生成後、追加で動的にメモリを割り当てる時

- メモリ割り当ての問題点
  - メモリの断片化
    - 空き領域がバラバラだと大きいメモリを使う場合不便
  - 別用途のメモリにアクセス出来てしまう
    - プロセスが他プロセスが使用しているアドレスを指定する場合、アクセスできる
  - マルチプロセスの扱いが困難

- メモリ割り当ての問題を解決するために仮想記憶というしくみがある

- 仮想記憶
  - 仮想アドレスというアドレスを用いて、間接的にシステムに搭載されているメモリ(物理アドレス)にアクセスする
  ※ 物理アドレスとはシステムに搭載されているメモリの実際のアドレス
  - 仮想アドレスから物理アドレスへの変換はページテーブルという表を用いる

### 参考になるリンク
- メモリ管理
  - https://www.kimullaa.com/entry/2019/12/01/143242

## ch06

- 記憶装置の階層
  - レジスタ→キャッシュメモリ→メモリ→ストレージデバイス
- キャッシュメモリはレジスタとメモリの仲介役を行う。(両者の処理スピードに差があるため)
- キャッシュにデータがある場合、メモリアクセスの速度には依存しない。
  うまくいくシステムは `参照の局所性` と呼ばれる特徴がある。
  下記2点から、プロセスのメモリ総量よりも狭い範囲のメモリにアクセスする傾向があり、それがキャッシュメモリに収まっていれば良い
  - 時間的局所性
    - ある時点でアクセスされたデータは再びアクセスする可能性が高い
      - ループ処理にあるコード
  - 空間的局所性
    - ある時点で特定のデータにアクセスすると、それに近い場所のデータにアクセスする
      - 配列のデータ

- ページキャッシュ
  - ストレージデバイス上のファイルデータをメモリにキャッシュする
